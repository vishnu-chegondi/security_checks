<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Security Checks</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script src="https://unpkg.com/@heroicons/v2/24/outline/esm/Bars3Icon.js"></script>
</head>
<body>
<div class="flex h-screen bg-gray-100">
  <!-- Sidebar -->
  <div id="sidebar" class="hidden md:flex flex-shrink-0 shadow-lg">
  <div class="flex flex-col">
      <div class="flex flex-col flex-grow pt-5 overflow-y-auto bg-white border-r border-gray-200">
        <div class="flex items-center flex-shrink-0 px-4">
          <h1 class="text-xl font-semibold text-blue-500">Natera Security Checks</h1>
        </div>
        <nav class="flex-1 px-2 mt-5 pt-5 space-y-1 bg-gray-200 text-gray-500">
          <!-- Add navigation items here -->
          <div class="flex items-center px-2 py-2 my-2 text-sm font-medium rounded-md hover:bg-gray-200">
            <a href="/">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 inline mr-2">
              <path d="M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z" />
            </svg>

            Profiles
            </a>
          </div>
          {% if aws_account_id %}
          <div class="flex items-center px-2 py-2 my-2 text-sm font-medium rounded-md hover:bg-gray-200">
            <a href="/aws/ec2/{{ aws_account_id }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 inline mr-2">
                <path d="M15.5 2A1.5 1.5 0 0 0 14 3.5v13a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 16.5 2h-1ZM9.5 6A1.5 1.5 0 0 0 8 7.5v9A1.5 1.5 0 0 0 9.5 18h1a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 10.5 6h-1ZM3.5 10A1.5 1.5 0 0 0 2 11.5v5A1.5 1.5 0 0 0 3.5 18h1A1.5 1.5 0 0 0 6 16.5v-5A1.5 1.5 0 0 0 4.5 10h-1Z" />
              </svg>

              Dashboard</a>
          </div>
          <div class="flex items-center px-2 py-2 my-2 text-sm font-medium rounded-md hover:bg-gray-200">
            <a href="/aws/ec2/imdsv1/{{ aws_account_id }}">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 inline mr-2">
                <path d="M4.464 3.162A2 2 0 0 1 6.28 2h7.44a2 2 0 0 1 1.816 1.162l1.154 2.5c.067.145.115.291.145.438A3.508 3.508 0 0 0 16 6H4c-.288 0-.568.035-.835.1.03-.147.078-.293.145-.438l1.154-2.5Z" />
                <path fill-rule="evenodd" d="M2 9.5a2 2 0 0 1 2-2h12a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2Zm13.24 0a.75.75 0 0 1 .75-.75H16a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V9.5Zm-2.25-.75a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75H13a.75.75 0 0 0 .75-.75V9.5a.75.75 0 0 0-.75-.75h-.01ZM2 15a2 2 0 0 1 2-2h12a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2Zm13.24 0a.75.75 0 0 1 .75-.75H16a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-.75.75h-.01a.75.75 0 0 1-.75-.75V15Zm-2.25-.75a.75.75 0 0 0-.75.75v.01c0 .414.336.75.75.75H13a.75.75 0 0 0 .75-.75V15a.75.75 0 0 0-.75-.75h-.01Z" clip-rule="evenodd" />
              </svg>
              IMDSv1</a>
          </div>
          <div class="flex items-center px-2 py-2 my-2 text-sm font-medium rounded-md hover:bg-gray-200">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5 inline mr-2">
              <path d="M3.75 3A1.75 1.75 0 0 0 2 4.75v3.26a3.235 3.235 0 0 1 1.75-.51h12.5c.644 0 1.245.188 1.75.51V6.75A1.75 1.75 0 0 0 16.25 5h-4.836a.25.25 0 0 1-.177-.073L9.823 3.513A1.75 1.75 0 0 0 8.586 3H3.75ZM3.75 9A1.75 1.75 0 0 0 2 10.75v4.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0 0 18 15.25v-4.5A1.75 1.75 0 0 0 16.25 9H3.75Z" />
            </svg>

            AWS S3
          </div>
          {% endif %}
        </nav>
      </div>
    </div>
  </div>

  <!-- Main content -->
  <div class="flex-1 overflow-auto focus:outline-none">
    <main class="flex-1 relative pb-8 z-0 overflow-y-auto p-10">
      <!-- Add main content here -->
      <div class="relative flex w-2/5 float-left h-full">
        {% block heading %}{% endblock %}
      </div>
      <div class="relative flex w-3/5 float-left">

        {% if aws_account_id %}
        <div class="relative flex w-full h-12 rounded-lg focus-within:shadow-lg bg-white overflow-hidden border border-gray-300 hover:border-gray-400 transition-colors duration-200">
          <div class="grid place-items-center h-full w-12 text-gray-400 hover:text-gray-600 transition-colors duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                 stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
          </div>
          <select class="peer h-full w-full outline-none text-sm text-gray-700 pr-8 pl-2 bg-transparent hover:bg-gray-50 focus:bg-gray-50 cursor-pointer appearance-none"
                  id="search" onchange=updatePath(event)>
            {% for profile in profiles %}
            {% if profile == aws_account_id %}
            <option value="{{ profile }}" selected>{{ profile }}</option>
            {% else %}
            <option value="{{ profile }}">{{ profile }}</option>
            {% endif %}
            {% endfor %}
          </select>
          
          <script>
            function updatePath(event) {
              const selectedProfile = event.target.value;
              console.log(selectedProfile);
              const currentPath = window.location.pathname;
              const pathParts = currentPath.split('/');
              const accountIdIndex = pathParts.length;
              const currentAccountId = pathParts[accountIdIndex - 1];
              console.log(currentAccountId);
              const newPath = currentPath.replace(currentAccountId, selectedProfile);
              window.location.href = newPath;
            }

          </script>

        </div>
        {% endif %}
      </div>

      <div class="relative flex float-left h-full w-full">
      {% block content %}{% endblock %}
      </div>
    </main>
  </div>
</div>
</body>
</html>